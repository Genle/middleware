!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.moltin={})}(this,function(t){"use strict";function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(t,e){var r=[];return null===e||0===e.length?[]:"string"==typeof e?[{type:t,id:e}]:(Array.isArray(e)&&(r=e.map(function(e){return{type:t,id:e}})),r)}function n(){var t=new _,e=P();return null!==t.get("mcart")?t.get("mcart"):(t.set("mcart",e),e)}function o(t){return 204===t.status?new Promise(function(e){e({status:t.status,ok:t.ok,json:"{}"})}):new Promise(function(e){return t.json().then(function(r){return e({status:t.status,ok:t.ok,json:r})})})}function i(t,e){return Object.keys(e).map(function(r){var n=e[r];return t+"("+r+","+n+")"}).join(":")}function s(t,e){return"limit"===t||"offset"===t?"page"+e:"filter"===t?t+"="+Object.keys(e).map(function(t){return i(t,e[t])}).join(":"):t+"="+e}function u(t){var e=t.includes,r=t.sort,n=t.limit,o=t.offset,i=t.filter,u={};return e&&(u.include=e),r&&(u.sort="("+r+")"),n&&(u.limit="[limit]="+n),o&&(u.offset="[offset]="+o),i&&(u.filter=i),Object.keys(u).map(function(t){return s(t,u[t])}).join("&")}function a(t,e){return e.includes||e.sort||e.limit||e.offset||e.filter?t+"?"+u(e):t}function c(t){var e;return t&&(e='{\n      "data": '+JSON.stringify(t)+"\n    }"),e}function l(t,e,r){return void 0===r&&(r="cart_item"),{id:t,type:r,quantity:parseInt(e,10)}}function p(t){return"[object Function]"===S.call(t)}function h(t){return t.split("").map(function(t){return"(?:"+t.toUpperCase()+"|"+t.toLowerCase()+")"}).join("")}function f(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&Array.prototype.splice.call(t,r,1)}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function y(t,e){if(p(t)&&(e=t,t=null),t=t||"en",!e)return k.getInstance(t);e(k.getInstance(t))}function v(t,e){var r,n,o,i=""+t;if(0===i.length)return i;var s=i.toLowerCase().match(/\b\w+$/);if(s&&y().uncountables.indexOf(s[0])>-1)return i;for(var u=0,a=e.length;u<a;u++)if(r=e[u],n=r[0],o=r[1],i.match(n)){i=i.replace(n,o);break}return i}function m(t){return v(t,y(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en").plurals)}var g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function a(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function c(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&b(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function f(t,e){var r=(e=e||{}).body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function y(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}function v(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];this.map[t]=o?o+","+n:n},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,n){this.map[e(t)]=r(n)},o.prototype.forEach=function(t,e){var r=this;for(var n in r.map)r.map.hasOwnProperty(n)&&t.call(e,r.map[n],n,r)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},p.call(f.prototype),p.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var $=[301,302,303,307,308];v.redirect=function(t,e){if(-1===$.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=f,t.Response=v,t.fetch=function(t,e){return new Promise(function(r,n){var o=new f(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new v(e,t))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&m.blob&&(i.responseType="blob"),o.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}(self);var b="undefined"!=typeof self&&self||g,w=(b.fetch.bind(b),function(t,e){e={exports:{}},t(e,e.exports),e.exports}(function(t,r){!function(e,r){t.exports=r()}(0,function(){function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function r(t){return"function"==typeof t}function n(){return void 0!==L?function(){L(i)}:o()}function o(){var t=setTimeout;return function(){return t(i,1)}}function i(){for(var t=0;t<k;t+=2)(0,H[t])(H[t+1]),H[t]=void 0,H[t+1]=void 0;k=0}function s(t,e){var r=arguments,n=this,o=new this.constructor(a);void 0===o[X]&&j(o);var i=n._state;return i?function(){var t=r[i-1];D(function(){return T(i,o,t,n._result)})}():_(n,o,t,e),o}function u(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(a);return v(r,t),r}function a(){}function c(){return new TypeError("You cannot resolve a promise with itself")}function l(){return new TypeError("A promises callback cannot return that same promise.")}function p(t){try{return t.then}catch(t){return W.error=t,W}}function h(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function f(t,e,r){D(function(t){var n=!1,o=h(r,e,function(r){n||(n=!0,e!==r?v(t,r):b(t,r))},function(e){n||(n=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&o&&(n=!0,w(t,o))},t)}function d(t,e){e._state===K?b(t,e._result):e._state===V?w(t,e._result):_(e,void 0,function(e){return v(t,e)},function(e){return w(t,e)})}function y(t,e,n){e.constructor===t.constructor&&n===s&&e.constructor.resolve===u?d(t,e):n===W?(w(t,W.error),W.error=null):void 0===n?b(t,e):r(n)?f(t,e,n):b(t,e)}function v(e,r){e===r?w(e,c()):t(r)?y(e,r,p(r)):b(e,r)}function m(t){t._onerror&&t._onerror(t._result),$(t)}function b(t,e){t._state===J&&(t._result=e,t._state=K,0!==t._subscribers.length&&D($,t))}function w(t,e){t._state===J&&(t._state=V,t._result=e,D(m,t))}function _(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+K]=r,o[i+V]=n,0===i&&t._state&&D($,t)}function $(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?T(r,n,o,i):o(i);t._subscribers.length=0}}function E(){this.error=null}function A(t,e){try{return t(e)}catch(t){return Z.error=t,Z}}function T(t,e,n,o){var i=r(n),s=void 0,u=void 0,a=void 0,c=void 0;if(i){if((s=A(n,o))===Z?(c=!0,u=s.error,s.error=null):a=!0,e===s)return void w(e,l())}else s=o,a=!0;e._state!==J||(i&&a?v(e,s):c?w(e,u):t===K?b(e,s):t===V&&w(e,s))}function x(t,e){try{e(function(e){v(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}function O(){return Q++}function j(t){t[X]=Q++,t._state=void 0,t._result=void 0,t._subscribers=[]}function U(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[X]||j(this.promise),q(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&b(this.promise,this._result))):w(this.promise,P())}function P(){return new Error("Array Methods must be provided an Array")}function C(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function S(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(t){this[X]=O(),this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&C(),this instanceof I?x(this,t):S())}var R=void 0,q=R=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},k=0,L=void 0,B=void 0,D=function(t,e){H[k]=t,H[k+1]=e,2===(k+=2)&&(B?B(i):Y())},G="undefined"!=typeof window?window:void 0,N=G||{},F=N.MutationObserver||N.WebKitMutationObserver,M="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,H=new Array(1e3),Y=void 0;Y=M?function(){return process.nextTick(i)}:F?function(){var t=0,e=new F(i),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():z?function(){var t=new MessageChannel;return t.port1.onmessage=i,function(){return t.port2.postMessage(0)}}():void 0===G&&"function"==typeof e?function(){try{var t=e("vertx");return L=t.runOnLoop||t.runOnContext,n()}catch(t){return o()}}():o();var X=Math.random().toString(36).substring(16),J=void 0,K=1,V=2,W=new E,Z=new E,Q=0;return U.prototype._enumerate=function(t){for(var e=this,r=0;this._state===J&&r<t.length;r++)e._eachEntry(t[r],r)},U.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===u){var o=p(t);if(o===s&&t._state!==J)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===I){var i=new r(a);y(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},U.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===J&&(this._remaining--,t===V?w(n,r):this._result[e]=r),0===this._remaining&&b(n,this._result)},U.prototype._willSettleAt=function(t,e){var r=this;_(t,void 0,function(t){return r._settledAt(K,e,t)},function(t){return r._settledAt(V,e,t)})},I.all=function(t){return new U(this,t).promise},I.race=function(t){var e=this;return new e(q(t)?function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},I.resolve=u,I.reject=function(t){var e=new this(a);return w(e,t),e},I._setScheduler=function(t){B=t},I._setAsap=function(t){D=t},I._asap=D,I.prototype={constructor:I,then:s,catch:function(t){return this.then(null,t)}},I.polyfill=function(){var t=void 0;if(void 0!==g)t=g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=I},I.Promise=I,I})}),function(t){var e=t.application,r=t.client_id,n=t.client_secret,o=t.currency,i=t.host;this.application=e,this.client_id=r,this.client_secret=n,this.host=i||"api.moltin.com",this.protocol="https",this.version="v2",this.currency=o,this.auth={expires:3600,uri:"oauth/access_token"},this.sdk={version:"0.0.0-semantic-release",language:"JS"}}),_=function(){if("undefined"==typeof localStorage||null===localStorage){var t=require("node-localstorage").LocalStorage;this.localStorage=new t("./localStorage")}else this.localStorage=window.localStorage};_.prototype.set=function(t,e){return this.localStorage.setItem(t,e)},_.prototype.get=function(t){return this.localStorage.getItem(t)},_.prototype.delete=function(t){return this.localStorage.removeItem(t)};var $,E=g.crypto||g.msCrypto;if(E&&E.getRandomValues){var A=new Uint8Array(16);$=function(){return E.getRandomValues(A),A}}if(!$){var T=new Array(16);$=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),T[e]=t>>>((3&e)<<3)&255;return T}}for(var x=$,O=[],j=0;j<256;++j)O[j]=(j+256).toString(16).substr(1);var U=function(t,e){var r=e||0,n=O;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]},P=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||x)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||U(o)},C=function(t){this.config=t,this.storage=new _};C.prototype.authenticate=function(){var t=this,e=t.config,r=t.storage;if(!e.client_id)throw new Error("You must have a client_id set");if(!e.host)throw new Error("You have not specified an API host");var n={grant_type:e.client_secret?"client_credentials":"implicit",client_id:e.client_id};e.client_secret&&(n.client_secret=e.client_secret);var i=new Promise(function(t,r){fetch(e.protocol+"://"+e.host+"/"+e.auth.uri,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}).then(o).then(function(e){e.ok&&t(e.json),r(e.json)}).catch(function(t){return r(t)})});return i.then(function(t){r.set("mtoken",t.access_token),r.set("mexpires",t.expires)}),i},C.prototype.send=function(t,e,r){var n=this;void 0===r&&(r=void 0);var i=this,s=i.config,u=i.storage;return new Promise(function(i,a){var l=function(){var n={Authorization:"Bearer: "+u.get("mtoken"),"Content-Type":"application/json","X-MOLTIN-SDK-LANGUAGE":s.sdk.language,"X-MOLTIN-SDK-VERSION":s.sdk.version};s.application&&(n["X-MOLTIN-APPLICATION"]=s.application),s.currency&&(n["X-MOLTIN-CURRENCY"]=s.currency),fetch(s.protocol+"://"+s.host+"/"+s.version+"/"+t,{method:e.toUpperCase(),headers:n,body:c(r)}).then(o).then(function(t){t.ok&&i(t.json),a(t.json)}).catch(function(t){return a(t)})};return!u.get("mtoken")||Date.now().toString()>=u.get("mexpires")?n.authenticate().then(l).catch(function(t){return a(t)}):l()})};var S=Object.prototype.toString,I=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},R=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),q={},k=function(){function t(){I(this,t),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return R(t,null,[{key:"getInstance",value:function(e){return q[e]=q[e]||new t,q[e]}}]),R(t,[{key:"acronym",value:function(t){var e=this;this.acronyms[t.toLowerCase()]=t;var r=[];for(var n in e.acronyms)d(e.acronyms,n)&&r.push(e.acronyms[n]);this.acronymRegex=new RegExp(r.join("|"))}},{key:"plural",value:function(t,e){"string"==typeof t&&f(this.uncountables,t),f(this.uncountables,e),this.plurals.unshift([t,e])}},{key:"singular",value:function(t,e){"string"==typeof t&&f(this.uncountables,t),f(this.uncountables,e),this.singulars.unshift([t,e])}},{key:"irregular",value:function(t,e){f(this.uncountables,t),f(this.uncountables,e);var r=t[0],n=t.substr(1),o=e[0],i=e.substr(1);if(r.toUpperCase()===o.toUpperCase())this.plural(new RegExp("("+r+")"+n+"$","i"),"$1"+i),this.plural(new RegExp("("+o+")"+i+"$","i"),"$1"+i),this.singular(new RegExp("("+r+")"+n+"$","i"),"$1"+n),this.singular(new RegExp("("+o+")"+i+"$","i"),"$1"+n);else{var s=h(n),u=h(i);this.plural(new RegExp(r.toUpperCase()+s+"$"),o.toUpperCase()+i),this.plural(new RegExp(r.toLowerCase()+s+"$"),o.toLowerCase()+i),this.plural(new RegExp(o.toUpperCase()+u+"$"),o.toUpperCase()+i),this.plural(new RegExp(o.toLowerCase()+u+"$"),o.toLowerCase()+i),this.singular(new RegExp(r.toUpperCase()+s+"$"),r.toUpperCase()+n),this.singular(new RegExp(r.toLowerCase()+s+"$"),r.toLowerCase()+n),this.singular(new RegExp(o.toUpperCase()+u+"$"),r.toUpperCase()+n),this.singular(new RegExp(o.toLowerCase()+u+"$"),r.toLowerCase()+n)}}},{key:"uncountable",value:function(){for(var t=arguments,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=t[n];this.uncountables=this.uncountables.concat(r)}},{key:"human",value:function(t,e){this.humans.unshift([t,e])}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),t}(),L={en:function(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/^(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/^(m|l)ouse$/i,"$1ice"),t.plural(/^(m|l)ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(ss)$/i,"$1"),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),t.singular(/(^analy)(sis|ses)$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/^(m|l)ice$/i,"$1ouse"),t.singular(/(bus)(es)?$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|test)(is|es)$/i,"$1is"),t.singular(/^(a)x[ie]s$/i,"$1xis"),t.singular(/(octop|vir)(us|i)$/i,"$1us"),t.singular(/(alias|status)(es)?$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("zombie","zombies"),t.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};for(var B in L)y(B,L[B]);var D={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"Th","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ŋ":"NG","ŋ":"ng","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z"},G={},N=(function(){function t(){var e=this;I(this,t),this.approximations={};for(var r in D)e.approximate(r,D[r])}R(t,null,[{key:"getInstance",value:function(e){return G[e]=G[e]||new t,G[e]}}]),R(t,[{key:"approximate",value:function(t,e){this.approximations[t]=e}},{key:"transliterate",value:function(t,e){var r=this;return t.replace(/[^\u0000-\u007f]/g,function(t){return r.approximations[t]||e||"?"})}}])}(),function(t){this.request=new C(t),this.config=t});N.prototype.All=function(){var t=this,e=t.includes,r=t.sort,n=t.limit,o=t.offset,i=t.filter;return this.call=this.request.send(a(this.endpoint,{includes:e,sort:r,limit:n,offset:o,filter:i}),"GET"),this.call},N.prototype.Get=function(t){return this.call=this.request.send(a(this.endpoint+"/"+t,{includes:this.includes}),"GET"),this.call},N.prototype.Limit=function(t){return this.limit=t,this},N.prototype.Offset=function(t){return this.offset=t,this},N.prototype.Sort=function(t){return this.sort=t,this};var F=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.With=function(t){return t&&(this.includes=t.toString().toLowerCase()),this},e}(N),M=function(t){function e(e){t.call(this,e),this.endpoint="products"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Filter=function(t){return this.filter=t,this},e.prototype.CreateRelationships=function(t,e,n){var o=r(e,n);return this.request.send(this.endpoint+"/"+t+"/relationships/"+m(e),"POST",o)},e.prototype.DeleteRelationships=function(t,e,n){var o=r(e,n);return this.request.send(this.endpoint+"/"+t+"/relationships/"+m(e),"DELETE",o)},e.prototype.UpdateRelationships=function(t,e,n){void 0===n&&(n=null);var o=r(e,n);return this.request.send(this.endpoint+"/"+t+"/relationships/"+m(e),"PUT",o)},e}(F),z=function(t){function e(e){t.call(this,e),this.endpoint="currencies",this.storage=new _}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.Set=function(t){var e=this,r=e.config,n=e.storage;return n.set("mcurrency",t),r.currency=t,new Promise(function(t,e){var r=n.get("mcurrency");try{t(r)}catch(t){e(new Error(t))}})},e.prototype.Active=function(){var t=this.storage;return new Promise(function(e,r){var n=t.get("mcurrency");try{e(n)}catch(t){r(new Error(t))}})},e}(N),H=function(t){function e(e){t.call(this,e),this.endpoint="brands"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(F),Y=function(t){function e(e){t.call(this,e),this.endpoint="carts",this.cartId=n()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Get=function(t){return void 0===t&&(t=this.cartId),this.request.send(this.endpoint+"/"+t,"GET")},e.prototype.Items=function(t){return void 0===t&&(t=this.cartId),this.request.send(this.endpoint+"/"+t+"/items","GET")},e.prototype.AddProduct=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=this.cartId);var n=l(t,e);return this.request.send(this.endpoint+"/"+r+"/items","POST",n)},e.prototype.AddCustomItem=function(t,e){void 0===e&&(e=this.cartId);var r=Object.assign(t,{type:"custom_item"});return this.request.send(this.endpoint+"/"+e+"/items","POST",r)},e.prototype.RemoveItem=function(t,e){return void 0===e&&(e=this.cartId),this.request.send(this.endpoint+"/"+e+"/items/"+t,"DELETE")},e.prototype.UpdateItemQuantity=function(t,e,r){void 0===r&&(r=this.cartId);var n=l(t,e);return this.request.send(this.endpoint+"/"+r+"/items/"+t,"PUT",n)},e.prototype.Checkout=function(t,e){return void 0===e&&(e=this.cartId),this.request.send(this.endpoint+"/"+e+"/checkout","POST",t)},e.prototype.Delete=function(t){return void 0===t&&(t=this.cartId),this.request.send(this.endpoint+"/"+t,"DELETE")},e}(N),X=function(t){function e(e){t.call(this,e),this.endpoint="categories"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Tree=function(){return this.request.send(this.endpoint+"/tree","GET")},e}(F),J=function(t){function e(e){t.call(this,e),this.endpoint="collections"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(F),K=function(t){function e(e){t.call(this,e),this.endpoint="orders"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Items=function(t){return this.request.send(this.endpoint+"/"+t+"/items","GET")},e.prototype.Payment=function(t,e){return this.request.send(this.endpoint+"/"+t+"/payments","POST",e)},e.prototype.Transactions=function(t){return this.request.send(this.endpoint+"/"+t+"/transactions","GET")},e}(N),V=function(t){function e(e){t.call(this,e),this.endpoint="gateways"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.Enabled=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",{type:"gateway",enabled:e})},e}(N),W=function(t){function e(e){t.call(this,e),this.endpoint="customers"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e}(N),Z=function(t){this.config=t,this.request=new C(t),this.storage=new _,this.Products=new M(t),this.Currencies=new z(t),this.Brands=new H(t),this.Cart=new Y(t),this.Categories=new X(t),this.Collections=new J(t),this.Orders=new K(t),this.Gateways=new V(t),this.Customers=new W(t)};Z.prototype.Authenticate=function(){return this.request.authenticate()};t.default=Z,t.gateway=function(t){return new Z(new w(t))},Object.defineProperty(t,"__esModule",{value:!0})});
